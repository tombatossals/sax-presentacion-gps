<section>
  <section>
    <h2>Agentes</h2>
    <p>Los agentes son cada uno de los dispositivos enrutadores y que establecen los enlaces inalámbricos que queremos tener monitorizados en nuestro sistema.</p>
    <ul>
        <li>Agentes pasivos.</li>
        <li>Responden a las consultas<br /> del recolector.</li>
        <li>Configuración mínima.</li>
    </ul>
    <img style="width: 320px;" src="img/agentes.png" />
  </section>
  <section>
    <h2>Tipos de agentes</h2>
    <ul>
        <li>Mikrotik (acceso vía API)</li>
        <li>OpenWRT (acceso vía SSH)</li>
    </ul>
    <p>Necesario usuario/contraseña para acceder a consultar la información. Puede ser el usuario <strong>guest</strong> del <strong>unsolclick</strong>.</p>
  </section>
  <section>
    <h2>Activar acceso a la API RouterOS</h2>
    <pre>
        <code>
/ip service set api disabled=no
        </code>
    </pre>
  </section>
  <section>
    <h2>Bandwidth monitor</h2>
    <p>Script de monitorización de ancho del banda de un enlace P2P en un nodo mikrotik</p>
    <pre>
        <code>
/system script
name="bandwidth" owner="admin" policy=ftp,reboot,read,write,policy,test,winbox,password,sniff,sensitive,api last-started=jun/06/2014 09:43:46 run-count=989 source=
  :local ttx
  :local rrx
  :set ttx 0
  :set rrx 0
  :global ip
  :global username
  :global password
  :global interval
  :global duration
  :global proto
  /tool bandwidth-test $ip user=$username password=$password protocol=$proto \
      direction=transmit interval=$interval duration=$duration do={
      :if ($status="running") do={
        :set ttx $"tx-total-average"
      }
  }
  /tool bandwidth-test $ip user=$username password=$password protocol=$proto \
      direction=receive interval=$interval duration=$duration do={
      :if ($status="running") do={
        :set rrx $"rx-total-average"
      }
  }
  :put ("tx:". $ttx . " rx:" . $rrx )
        </code>
    </pre>
  </section>
  <section>
    <h2>Bandwidth monitor</h2>
    <p>Para nodos <strong>OpenWRT</strong> utilizamos una versión del test de ancho de banda de mikrotik hecha para Linux.</p>
    <p>Código fuente: <a href="https://github.com/kadosch/mikrotik_btest">https://github.com/kadosch/mikrotik_btest</a>.</p>
    <pre>
        <code>
/usr/sbin/mikrotik_btest -d both -t 20 172.16.5.105
        </code>
    </pre>
  </section>
  <section class="fullscreen" data-background="img/bwidth.png">
    <h1>Gráficas de ancho de banda</h1>
  </section>
  <section class="fullscreen" data-background="img/bwidth02.png">
    <h1>Gráficas de ancho de banda</h1>
  </section>
  <section class="fullscreen" data-background="img/bwidth03.png">
    <h1>Gráficas de ancho de banda</h1>
  </section>
</section>
